getwd()
mn <- fromJSON("../json/main.json")
mn <- fromJSON(file = "../json/main.json")
spc <- fromJSON(file = "../json/spec.json")
names(spc)
names(spc$vars)
names(spc$vars$Mod12_Anthro)
names(spc$vars$Mod12_Anthro$vars)
names(mn)
length(mn)
mn[[1]]
dir("../delivery1/")
mn <- dir("../delivery1/", full.names = TRUE)[25]
mn
mm <- getMetaDataList(mn)
mm <- getMetaDataList(mn)
head(names(mm)
)
cat(toJSON(mm), file = "../json/main.json")
mod <- spc$vars$Mod4_Housing
names(mod)
names(mod$vars)
mn
mn <- mm
rm(mm)
mn$MOVIN_MOVINY
mn <- mapSpecModuleToMeta(mn, mod)
names(mod$vars)
mn$RENTFROM
load("debug.Rda")
row
vls
    vals <- vls[which(vls$VARNAME == row["VARNAME"]), c("CODE", "CODELABEL")]
dim(vals)
vals
names(spec)
mod <- spec$modules$Mod7_Educ
mn <- mapSpecModuleToMeta(mn, mod)
mn$RENTFROM
mn <- fromJSON(file = "../json/main.json")
mn <- mapSpecModuleToMeta(mn, mod)
length(mod)
names(mod)
length(mod$vars)
tail(mod$vars)
tail(names(mod$vars))
tail(names(mod$vars), n = 16)
head(names(mod$vars), n = 16)
mod <- spec$modules$Mod4_Housing
tail(names(mod$vars), n = 16)
mn <- mapSpecModuleToMeta(mn, mod)
mn$RENTFROM
sp <- fromJSON(file = "../json/spec.json")
mod <- sp$modules$Mod4_Housing
mn <- mapSpecModuleToMeta(mn, mod)
mn$RENTFROM
a <- mn$RENTFROM
a$spec$ctg
spc <- data.frame(code = a$spec$code, spcLabel = a$spec$label, stringsAsFactors=F)
spc
spc <- data.frame(code = a$spec$ctg$code, spcLabel = a$spec$ctg$label, stringsAsFactors=F)
spc
ma <- data.frame(code = a$ctg$code, mnLabel = a$ctg$label, frq = a$ctg$Freq, stringsAsFactors=F)
ma
a$ctg$Freq
unlist(a$ctg$Freq)
as.numeric(unlist(a$ctg$Freq))
ma <- data.frame(code = a$ctg$code, mnLabel = a$ctg$label, frq = as.numeric(unlist(a$ctg$Freq)), stringsAsFactors=F)
ma
full_join(ma, spc)
str(ma)
ma <- data.frame(code = as.numeric(a$ctg$code), mnLabel = a$ctg$label, frq = as.numeric(unlist(a$ctg$Freq)), stringsAsFactors=F)
full_join(ma, spc)
names(a) 
names(spc)
mapToSpec()
k <- toJSON(file = "../json/main_mapped.json")
k <- fromJSON(file = "../json/main_mapped.json")
k$ADDAC
p <- 1:100
isM <- function(x){"mapped" %in% names(k[[x]])}
isM(1)
isM(2)
isM(77)
vapply(p, isM, TRUE)
mapToSpec()
names(spc)
names(spc$modules)
mapToSpec()
k <- fromJSON(file = "../json/main_mapped.json")
vapply(p, isM, TRUE)
k
k$CASI_DRINKANY
getComparisonObject(k$CASI_DRINKANY)
names(k)
gsub("\\d$", "blah", "hhh")
gsub("\\d$", "blah", "h3hh")
gsub("\\d$", "blah", "h3hh3")
gsub("\\d$", "_loop", "h3hh3")
nmk <- names(k)
m <- gsub("\\d$", "_loop", nmk)
length(unique(nmk))
length(unique(m))
mm<- gsub("_\\d_(final|coded)$", "_loop", m)
length(unique(mm))
mm
unique(mm)
mm<- gsub("_\\d_(final|coded)$", "_loop", "dietref_94_coded")
mm
gsub("_\\d_(final|coded)$", "_loop", "dietref_94_coded")
gsub("_\\d+_(final|coded)$", "_loop", "dietref_94_coded")
mm<- gsub("_\\d+_(final|coded)$", "_loop", m)
length(unique(mm))
m <- gsub("\\d+$", "_loop", nmk)
length(unique(m))
mm<- gsub("_\\d+_(final|coded)$", "_loop", m)
length(unique(mm))
unique(mm)
unique(mm)
k$ACTEXCL1
k$ACTEXCL2$varLabel
k$ACTEXCL3$varLabel
k$ACTEXCL4$varLabel
hh <- data.frame(a=1:3, b=2:4)
hh
full_join(hh, data.frame())
full_join(hh, data.frame(a = c(), b = c()))
rt <- "ACTREF"
rt
assignToLoop(rt, k)
names(k)
assignToLoop("DIETLOG", k)
names(sp$modules)
cog <- sp$modules$Mod10_CogAssess
names(cog$vars)
l <- names(cog$vars)
l <- names(cog$vars)
k$CFTEST
q() 
